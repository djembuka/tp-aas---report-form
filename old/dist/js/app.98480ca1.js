(function(t){function e(e){for(var c,i,a=e[0],s=e[1],r=e[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c]);u&&u(e);while(p.length)p.shift()();return l.push.apply(l,r||[]),n()}function n(){for(var t,e=0;e<l.length;e++){for(var n=l[e],c=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(c=!1)}c&&(l.splice(e--,1),t=i(i.s=n[0]))}return t}var c={},o={app:0},l=[];function i(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=c,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)i.d(n,c,function(e){return t[e]}.bind(null,c));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var r=0;r<a.length;r++)e(a[r]);var u=s;l.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2e75":function(t,e,n){},4791:function(t,e,n){"use strict";n("9309")},"511a":function(t,e,n){"use strict";n("2e75")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._l(t.$store.state.blocks,(function(e,c){return n(t.getAppName(e.type),{key:e.id,tag:"component",attrs:{block:e,blockIndex:c}})})),n("app-button-submit")],2)},l=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",[t.block.title?n("legend",[t._v(t._s(t.block.title))]):t._e(),t._l(t.block.controls,(function(e,c){return n("div",{key:e.property},[n("app-control-"+e.type,{tag:"component",attrs:{fc:e,fcIndex:c,blockIndex:t.blockIndex}})],1)}))],2)},a=[],s=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-lg-6 col-12"},[n("div",{staticClass:"b-float-label",class:{invalid:t.isInvalid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.controlValue,expression:"controlValue"}],ref:"input",attrs:{"data-pattern":t.fc.pattern,"data-required":t.fc.required,id:t.fc.word+"_"+t.fc.property+"_"+t.blockIndex,name:t.fc.word+"["+t.fc.property+"]["+t.blockIndex+"]",type:"text",autocomplete:"off"},domProps:{value:t.controlValue},on:{focus:t.focusControl,blur:t.blurControl,input:[function(e){e.target.composing||(t.controlValue=e.target.value)},t.inputControl]}}),n("label",{ref:"label",class:{active:t.isActive},attrs:{for:t.fc.word+"_"+t.fc.property+"_"+t.blockIndex}},[t._v(t._s(t.fc.label))])])]),t.fc.multy&&t.fcIndex?t._e():n("hr",{staticClass:"hr--xs d-block d-lg-none w-100"}),t.fc.multy&&t.fcIndex?t._e():n("div",{staticClass:"col-lg-6 col-12 small"},[this.fc.completeBlock&&this.fc.completeBlock.title?n("span",{staticClass:"text-muted"},[t._v(t._s(this.fc.completeBlock.title))]):t._e(),this.fc.completeBlock&&this.fc.completeBlock.title?n("span",[this.fc.completeBlock.value?n("a",{ref:"link",staticClass:"b-complete-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.clickLink.apply(null,arguments)}}},[t._v(" "+t._s(this.fc.completeBlock.value)+" "),n("span",{staticClass:"icon",staticStyle:{"background-image":"url('/template/images/copy.svg')"}})]):n("span",{staticClass:"text-muted"},[t._v("Пусто.")])]):t._e(),this.fc.completeBlock&&this.fc.completeBlock.comment?n("div",{staticClass:"text-muted b-complete-comment"},[t._v(" "+t._s(this.fc.completeBlock.comment)+" ")]):t._e()])]),n("hr",{staticClass:"hr--sl"})])}),r=[],u=(n("caad"),n("2532"),n("ac1f"),n("00b4"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),{data:function(){return{controlValue:this.fc.multy?this.fc.value[this.fcIndex].val:this.fc.value,isActive:this.fc.multy?""!==this.fc.value[this.fcIndex].val:""!==this.fc.value,isInvalid:!1}},props:["fc","blockIndex","fcIndex"],emits:["autosave","timeoutAutosave"],watch:{controlValue:function(t){var e={blockIndex:this.blockIndex,property:this.fc.property,value:t};this.fc.multy&&(e.index=this.fcIndex),this.$store.commit("setControlValue",e)}},methods:{clickLink:function(){this.controlValue=this.fc.completeBlock.value,this.isActive=!0,this.validate(),this.$emit("autosave")},inputControl:function(){this.controlValue&&(this.isInvalid=!1),this.$emit("timeoutAutosave")},focusControl:function(){this.$refs.input.closest(".b-float-label").className.includes("invalid")&&(this.isInvalid=!0)},blurControl:function(){""!==this.controlValue?this.isActive=!0:this.isActive=!1,this.validate(),this.$emit("autosave")},validate:function(){this.fc.required&&""===this.controlValue||this.fc.pattern&&""!==this.controlValue&&!new RegExp(this.fc.pattern,"ig").test(this.controlValue)?this.isInvalid=!0:this.isInvalid=!1}}}),d=u,p=n("2877"),f=Object(p["a"])(d,s,r,!1,null,"57f5d91e",null),v=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"b-checkbox",class:{invalid:t.fc.invalid}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"filled-in",attrs:{type:"checkbox",required:"",name:t.fc.name},domProps:{value:t.fc.value,checked:t.fc.checked,checked:Array.isArray(t.checked)?t._i(t.checked,t.fc.value)>-1:t.checked},on:{change:function(e){var n=t.checked,c=e.target,o=!!c.checked;if(Array.isArray(n)){var l=t.fc.value,i=t._i(n,l);c.checked?i<0&&(t.checked=n.concat([l])):i>-1&&(t.checked=n.slice(0,i).concat(n.slice(i+1)))}else t.checked=o}}}),n("span",{domProps:{innerHTML:t._s(t.fc.label)}})])]),n("hr",{staticClass:"hr--sl"})])},m=[],b={data:function(){return{checked:this.fc.checked}},props:["fc","blockIndex","fcIndex"],emits:["autosave","timeoutAutosave"],watch:{checked:function(t){var e={blockIndex:this.blockIndex,property:this.fc.property,value:t};this.fc.multy&&(e.index=this.fcIndex),this.$store.commit("setControlValue",e)}},methods:{}},k=b,y=Object(p["a"])(k,h,m,!1,null,"2933aa9c",null),x=y.exports,_={data:function(){return{}},props:{block:Object,blockIndex:Number},methods:{},components:{AppControlText:v,AppControlCheckbox:x}},g=_,C=(n("511a"),Object(p["a"])(g,i,a,!1,null,"08529ed3",null)),I=C.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-collapse-vc",class:{slide:t.slide,invalid:t.invalid}},[n("div",{staticClass:"b-collapse-vc__head",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleBody()}}},[n("a",{attrs:{href:""},on:{click:function(t){t.preventDefault()}}},[n("i",{staticClass:"b-collapse-vc__title"},[t._v(t._s(t.block.title))]),t.invalid?n("i",{staticClass:"b-collapse-vc__danger text-danger"},[t._v("Не заполнены обязательные поля")]):t._e()]),n("span")]),n("transition",{attrs:{css:!1},on:{enter:t.enter,leave:t.leave}},[t.slide?n("div",{staticClass:"b-collapse-vc__body"},t._l(t.block.controls,(function(e,c){return n("div",{key:e.property},[n("app-control-"+e.type,{tag:"component",attrs:{fc:e,fcIndex:c,blockIndex:t.blockIndex}})],1)})),0):t._e()])],1)},A=[],O={data:function(){return{slide:!1,invalid:!1}},props:{block:Object,blockIndex:Number},methods:{enter:function(t){window.Velocity(t,"slideDown",{easing:"ease",duration:500})},leave:function(t){window.Velocity(t,"slideUp",{easing:"ease",duration:500})},toggleBody:function(){this.slide=!this.slide,this.$store.commit("setBlockOpen",this.slide)}},components:{AppControlText:v,AppControlCheckbox:x}},j=O,B=(n("d4aa"),Object(p["a"])(j,w,A,!1,null,"71a0cf9e",null)),$=B.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-form__submit"},[n("a",{staticClass:"btn btn-secondary btn-lg",attrs:{href:"#","data-toggle":"modal","data-target":"#submitConfirmModal",disabled:t.isDisabled}},[t._v("Отправить")])])},P=[],E=(n("7db0"),n("d3b7"),{data:function(){return{}},computed:{isDisabled:function(){var t=!this.$store.state.blocks.find((function(t){return t.controls.find((function(t){return"checkbox"!==t.type&&t.required&&(t.multy?t.value.every((function(t){return""===t.val})):""===t.value)}))})),e=!this.$store.state.blocks.find((function(t){return t.controls.find((function(t){return"checkbox"===t.type&&t.required&&!t.checked}))})),n=!this.$store.state.blocks.find((function(t){return t.controls.find((function(t){return t.pattern&&(t.multy?t.value.every((function(e){return!new RegExp(t.pattern,"ig").test(e.val)&&""!==e.val})):!new RegExp(t.pattern,"ig").test(t.value)&&""!==t.value)}))}));return!(t&&e&&n)}},methods:{}}),S=E,N=(n("4791"),Object(p["a"])(S,V,P,!1,null,null,null)),q=N.exports,D={name:"App",methods:{getAppName:function(t){return"app-block".concat("collapse"===t?"-collapse":"")}},components:{AppBlock:I,AppBlockCollapse:$,AppButtonSubmit:q}},M=D,T=Object(p["a"])(M,o,l,!1,null,null,null),L=T.exports,R=n("5530"),F=n("2f62");c["a"].use(F["a"]);var J=new F["a"].Store({state:Object(R["a"])({},window.reportFormStore),mutations:{setBlockOpen:function(t,e){t.blocks[0].open=e},setControlValue:function(t,e){var n=t.blocks[e.blockIndex].controls.find((function(t){return t.property===e.property}));n.multy&&void 0!==e.index?c["a"].set(n.value[e.index],"val",e.value):"checkbox"===n.type?c["a"].set(n,"checked",e.value):n.multy||c["a"].set(n,"value",e.value)}},actions:{},modules:{}});c["a"].config.productionTip=!1,new c["a"]({store:J,render:function(t){return t(L)}}).$mount("#reportFormApp")},"65ea":function(t,e,n){},9309:function(t,e,n){},d4aa:function(t,e,n){"use strict";n("65ea")}});
//# sourceMappingURL=app.98480ca1.js.map